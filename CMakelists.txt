cmake_minimum_required(VERSION 3.7.1)
project(FISC-VM)

set(CMAKE_BINARY_DIR ${CMAKE_SOURCE_DIR}/bin)
set(CMAKE_INCLUDE_PATH ${CMAKE_SOURCE_DIR}/include)
set(EXECUTABLE_OUTPUT_PATH ${CMAKE_BINARY_DIR})

if(CMAKE_COMPILER_IS_GNUCXX)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
endif(CMAKE_COMPILER_IS_GNUCXX)

include_directories(include src lib)

add_subdirectory(src)

add_executable(fvm src/FVM.cpp)

set_property(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} PROPERTY VS_STARTUP_PROJECT fvm)

target_link_libraries(fvm
    ########## VM Infrastructure ##########
    FVMDebug 
    FVMAPILinux 
    FVMAPIWindows 
    FVMGenDebug
    FVMPass
    FVMRegistry
    FVMRuntime

    ########## Support Libraries ##########
    FVMUtils
)

set_property(GLOBAL PROPERTY USE_FOLDERS ON)

set_target_properties(
    ########## VM Infrastructure folder ##########
    FVMDebug 
    FVMAPILinux 
    FVMAPIWindows 
    FVMGenDebug
    FVMPass
    FVMRegistry
    FVMRuntime

    PROPERTIES FOLDER "VM Infrastructure"
)

set_target_properties(
    ########## Support Libraries folder ##########
    FVMUtils

    PROPERTIES FOLDER "Support Libraries"
)

#########################################################################
############################ TARGET SPECIFIC ############################
#########################################################################

target_link_libraries(fvm
    ########## Machine Targets (!! add your target here !!) ##########
    FVMFISCPassError
    FVMFISCPassInitFinit
    FVMFISCPassIO
    FVMFISCPassMemory
    FVMFISCPassCPU
)

set_target_properties(
    ########## Machine Targets folder (!! add your target here !!) ##########
    FVMFISCPassError
    FVMFISCPassInitFinit
    FVMFISCPassIO
    FVMFISCPassMemory
    FVMFISCPassCPU

    PROPERTIES FOLDER "Machine Targets"
)

#########################################################################
#########################################################################
#########################################################################
